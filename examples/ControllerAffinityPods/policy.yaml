apiVersion: pac.weave.works/v2beta1
kind: Policy
metadata:
  name: weave.templates.affinity-pod-simple
spec:
  id: weave.templates.affinity-pod-simple
  name: Affinity Pod Simple
  description: "This Policy sets podAffinity keys, regardless of the Pod Affinity scheduling type. List out the keys you want to check for. This Policy supports the following Pod Affinity types:\n- preferredDuringSchedulingIgnoredDuringExecution \n- requiredDuringSchedulingIgnoredDuringExecution \n"
  how_to_solve: "When working with pod affinity, this Policy will traverse through the entity and find the proper keys, regardless of pod affinity type. The follwing is an example of where the key is located. \n```\n...\n  spec:\n    affinity:\n      podAffinity:\n        requiredDuringSchedulingIgnoredDuringExecution:\n        - labelSelector:\n            matchExpressions:\n            - key: <keys>\n```\nhttps://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/\nhttps://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#PodAffinity\n"
  category: weave.categories.capacity-management
  severity: medium
  standards:
    - id: weave.standards.soc2-type-i
      controls:
        - weave.controls.soc2-type-i.2.1.1
  parameters:
    - name: keys
      type: array
      required: true
      value:
    - name: exclude_namespaces
      type: array
      required: false
      value:
    - name: exclude_label_key
      type: string
      required: false
      value:
    - name: exclude_label_value
      type: string
      required: false
      value:
