apiVersion: pac.weave.works/v2beta1
kind: Policy
metadata:
  name: weave.templates.container-custom-probe
spec:
  id: weave.templates.container-custom-probe
  name: Container Custom Probe
  description: "This Policy allows defining the various container probes, and ensures consistent probes are configured across all containers. You can set the type of probe `livenessProbe`, `readinessProbe`, `startupProbe` along with a `command`, a `path` and a `port`. \n"
  how_to_solve: "```\n...\n  spec:\n    containers:\n    - container1\n      <probe_type>:\n        exec:\n          command: \n          - <command>\n    - container2\n      <probe_type>:\n        httpGet:\n          path: <path>\n          port: <port>\n```\nhttps://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-a-tcp-liveness-probe\n"
  category: weave.categories.reliability
  severity: high
  parameters:
    - name: probe_type
      type: string
      required: true
      value:
    - name: command
      type: array
      required: false
      value:
    - name: path
      type: string
      required: false
      value:
    - name: port
      type: integer
      required: false
      value:
    - name: exclude_namespaces
      type: array
      required: false
      value:
    - name: exclude_label_key
      type: string
      required: false
      value:
    - name: exclude_label_value
      type: string
      required: false
      value:
