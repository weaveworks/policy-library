apiVersion: pac.weave.works/v1
kind: Policy
metadata:
  name: weave.templates.enforce-prometheus-annotation-value
spec:
  id: weave.templates.enforce-prometheus-annotation-value
  name: Enforce Prometheus Annotation Value
  description: |
    This Policy ensures custom annotation values are set like Prometheus scrape, path, and port values in your Prometheus annotations. If you are using something other than the default values, you can customize those requirements here. 
  how_to_solve: |
    Ensure the values in the Policy match your custom Prometheus configurations. 
    ```
    metadata:
      annotations:
        <prometheus_annotation_key>: <prometheus_annotation_value>
    ```
    https://prometheus.io/docs/prometheus/latest/configuration/configuration/#pod
  category: weave.categories.observability
  severity: medium
  parameters:
  - name: prometheus_annotation_key
    type: string
    required: true
    value:
  - name: prometheus_annotation_value
    type: string
    required: true
    value:
  - name: exclude_namespace
    type: string
    required: false
    value:
  - name: exclude_label_key
    type: string
    required: false
    value:
  - name: exclude_label_value
    type: string
    required: false
    value:
