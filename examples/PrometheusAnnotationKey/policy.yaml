enable: true
name: magalix.policies.enforce-prometheus-annotation-key
description: |
  This Policy ensures annotation keys like `prometheus.io/scrape`, `prometheus.io/port`, or `prometheus.io/path` are set in your Policy's metadata annotation. This is based on the default configuration of Prometheus.
how_to_solve: |
  Set annotation keys like `prometheus.io/scrape`, `prometheus.io/port`, or `prometheus.io/path`.
  ```
  spec:
    template:
      metadata:
        annotations:
          <prometheus_annotation_key>: "value"
  ```
  https://prometheus.io/docs/prometheus/latest/configuration/configuration/#pod
category: magalix.categories.observability
severity: medium
parameters:
- default:
  name: prometheus_annotation_key
  required: true
  type: string
- default:
  name: exclude_namespace
  required: false
  type: string
- default:
  name: exclude_label_key
  required: false
  type: string
- default:
  name: exclude_label_value
  required: false
  type: string

